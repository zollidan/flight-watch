/**
 * fokker_f28_constants.h
 * 
 * Технические константы для Fokker F28 Fellowship
 * Все данные основаны на официальной документации и Type Certificate Data Sheet
 * 
 * Проект: FuelWatch - Flight Fuel Monitoring System
 */

#ifndef FOKKER_F28_CONSTANTS_H
#define FOKKER_F28_CONSTANTS_H

/* ============================================================================
 * МОДЕЛИ САМОЛЁТА
 * ============================================================================ */

typedef enum {
    F28_MK1000,     // Базовая модель, 55-65 пассажиров
    F28_MK2000,     // Удлинённая, до 79 пассажиров
    F28_MK3000,     // Улучшенная версия Mk1000
    F28_MK4000      // Самая популярная, до 85 пассажиров
} F28_Model;

/* ============================================================================
 * ЁМКОСТЬ ТОПЛИВНЫХ БАКОВ (в килограммах)
 * ============================================================================ */

// F28 Mark 1000
#define F28_MK1000_FUEL_CAPACITY_KG         10432.0     // Общая ёмкость
#define F28_MK1000_FUEL_CAPACITY_LITERS     13040.0     // В литрах
#define F28_MK1000_FUEL_CAPACITY_GALLONS    3444.0      // В US галлонах

// F28 Mark 2000 (аналогично Mk1000)
#define F28_MK2000_FUEL_CAPACITY_KG         10432.0
#define F28_MK2000_FUEL_CAPACITY_LITERS     13040.0
#define F28_MK2000_FUEL_CAPACITY_GALLONS    3444.0

// F28 Mark 4000 (приблизительно, требует уточнения)
#define F28_MK4000_FUEL_CAPACITY_KG         11000.0     // Оценочное значение
#define F28_MK4000_FUEL_CAPACITY_LITERS     13750.0     // Оценочное значение
#define F28_MK4000_FUEL_CAPACITY_GALLONS    3633.0      // Оценочное значение

/* ============================================================================
 * РАСПРЕДЕЛЕНИЕ ТОПЛИВА ПО БАКАМ (в процентах от общей ёмкости)
 * Примерные значения, требуют уточнения для конкретной модели
 * ============================================================================ */

#define F28_LEFT_WING_TANK_PERCENT      40.0    // Левый крыльевой бак
#define F28_RIGHT_WING_TANK_PERCENT     40.0    // Правый крыльевой бак
#define F28_CENTER_FUSELAGE_PERCENT     20.0    // Центральный фюзеляжный бак

/* ============================================================================
 * РАСХОД ТОПЛИВА (в кг/час)
 * ============================================================================ */

// F28 Mark 1000/2000 - Расход по фазам полёта
#define F28_MK1000_TAKEOFF_FLOW_KGH         4500.0  // Взлёт (максимальная тяга)
#define F28_MK1000_CLIMB_FLOW_KGH           3250.0  // Набор высоты
#define F28_MK1000_CRUISE_MAX_FLOW_KGH      2800.0  // Максимальный крейсерский
#define F28_MK1000_CRUISE_ECON_FLOW_KGH     1480.0  // Экономичный крейсерский
#define F28_MK1000_DESCENT_FLOW_KGH         1500.0  // Снижение
#define F28_MK1000_GROUND_IDLE_FLOW_KGH      300.0  // Руление (холостой ход)

// F28 Mark 4000 - Расход
#define F28_MK4000_CRUISE_FLOW_KGH          1380.0  // Крейсерский (~455 GPH)
#define F28_MK4000_CRUISE_FLOW_GPH           455.0  // В галлонах/час
#define F28_MK4000_CRUISE_FLOW_LH           1723.0  // В литрах/час

/* ============================================================================
 * СКОРОСТИ (в км/ч и узлах)
 * ============================================================================ */

// F28 Mark 1000
#define F28_MK1000_CRUISE_MAX_SPEED_KMH     848.0   // Максимальная крейсерская
#define F28_MK1000_CRUISE_MAX_SPEED_KIAS    458.0   // В узлах
#define F28_MK1000_CRUISE_ECON_SPEED_KMH    666.0   // Экономичная крейсерская
#define F28_MK1000_CRUISE_ECON_SPEED_KIAS   360.0   // В узлах

// F28 Mark 4000
#define F28_MK4000_CRUISE_SPEED_KMH         926.0   // ~500 KIAS
#define F28_MK4000_CRUISE_SPEED_KIAS        500.0   // Узлы

// MMO (Maximum Operating Mach)
#define F28_MMO                             0.75    // Mach number

/* ============================================================================
 * ВЫСОТЫ (в метрах и футах)
 * ============================================================================ */

#define F28_OPTIMAL_CRUISE_ALT_M            10000   // Оптимальная высота полёта
#define F28_OPTIMAL_CRUISE_ALT_FT           32800   // В футах (FL330)
#define F28_MAX_CRUISE_ALT_M                10670   // Максимальная высота
#define F28_MAX_CRUISE_ALT_FT               35000   // В футах (FL350)

/* ============================================================================
 * ВЕСА (в килограммах)
 * ============================================================================ */

// F28 Mark 1000
#define F28_MK1000_MAX_TAKEOFF_WEIGHT_KG    29480   // Максимальный взлётный вес
#define F28_MK1000_OPERATING_EMPTY_KG       16144   // Пустой эксплуатационный
#define F28_MK1000_MAX_PAYLOAD_KG            8629   // Максимальная полезная нагрузка
#define F28_MK1000_ZERO_FUEL_WEIGHT_KG      24773   // Вес без топлива

/* ============================================================================
 * РЕЗЕРВЫ ТОПЛИВА (в килограммах и процентах)
 * ============================================================================ */

// Минимальные резервы (в минутах полёта)
#define F28_ALTERNATE_RESERVE_MIN           45      // До запасного аэродрома
#define F28_HOLDING_RESERVE_MIN             30      // Ожидание
#define F28_FINAL_RESERVE_MIN               30      // Финальный резерв

// Пороги предупреждений (в процентах от общей ёмкости)
#define F28_FUEL_CRITICAL_PERCENT           10.0    // Критический уровень
#define F28_FUEL_LOW_PERCENT                20.0    // Низкий уровень
#define F28_FUEL_WARNING_PERCENT            30.0    // Предупреждение

// Пороги предупреждений (в килограммах для Mk1000)
#define F28_MK1000_FUEL_CRITICAL_KG         1043.0  // 10% от ёмкости
#define F28_MK1000_FUEL_LOW_KG              2086.0  // 20% от ёмкости
#define F28_MK1000_FUEL_WARNING_KG          3130.0  // 30% от ёмкости

// Рекомендуемый резерв для безопасного полёта (в минутах)
#define F28_RECOMMENDED_RESERVE_MIN         45      // 45 минут полёта

/* ============================================================================
 * КОНВЕРСИЯ ЕДИНИЦ (Jet A-1, плотность ~0.8 кг/л)
 * ============================================================================ */

// Плотность топлива Jet A-1
#define JET_A1_DENSITY_KG_PER_LITER         0.8     // кг/литр
#define JET_A1_DENSITY_LBS_PER_GAL          6.7     // фунты/галлон

// Конверсия объём <-> вес
#define KG_TO_LITERS(kg)                    ((kg) / JET_A1_DENSITY_KG_PER_LITER)
#define LITERS_TO_KG(l)                     ((l) * JET_A1_DENSITY_KG_PER_LITER)
#define LITERS_PER_GALLON                   3.785
#define KG_PER_GALLON                       3.028

// Конверсия скорости
#define KMH_TO_KNOTS(kmh)                   ((kmh) / 1.852)
#define KNOTS_TO_KMH(kts)                   ((kts) * 1.852)
#define KMH_TO_MPH(kmh)                     ((kmh) / 1.609)

// Конверсия высоты
#define METERS_TO_FEET(m)                   ((m) * 3.28084)
#define FEET_TO_METERS(ft)                  ((ft) / 3.28084)

/* ============================================================================
 * ФАЗЫ ПОЛЁТА
 * ============================================================================ */

typedef enum {
    FLIGHT_PHASE_UNKNOWN,       // Неизвестная фаза
    FLIGHT_PHASE_GROUND,        // На земле (двигатели работают)
    FLIGHT_PHASE_TAKEOFF,       // Взлёт
    FLIGHT_PHASE_CLIMB,         // Набор высоты
    FLIGHT_PHASE_CRUISE,        // Крейсерский полёт
    FLIGHT_PHASE_DESCENT,       // Снижение
    FLIGHT_PHASE_APPROACH,      // Заход на посадку
    FLIGHT_PHASE_LANDING        // Посадка
} FlightPhase;

/* ============================================================================
 * ПОРОГИ ДЛЯ ОПРЕДЕЛЕНИЯ ФАЗ ПОЛЁТА
 * ============================================================================ */

// Вертикальная скорость (feet per minute)
#define PHASE_CLIMB_VS_MIN              500     // Минимальная для набора
#define PHASE_DESCENT_VS_MAX           -500     // Максимальная для снижения

// Скорость (узлы)
#define PHASE_GROUND_SPEED_MAX           50     // На земле
#define PHASE_TAKEOFF_SPEED_MIN          50     // Начало взлёта
#define PHASE_APPROACH_SPEED_MAX        180     // Заход на посадку

// Высота (футы)
#define PHASE_CRUISE_ALT_MIN          10000     // Минимум для крейсерского
#define PHASE_APPROACH_ALT_MAX         3000     // Максимум для захода

// Положение шасси
#define GEAR_DOWN                         1
#define GEAR_UP                           0

/* ============================================================================
 * ИНТЕРВАЛЫ ОБНОВЛЕНИЯ (в секундах)
 * ============================================================================ */

#define UPDATE_INTERVAL_FAST              1     // Быстрое обновление (дисплей)
#define UPDATE_INTERVAL_NORMAL            5     // Нормальное (расчёты)
#define UPDATE_INTERVAL_LOGGING          30     // Запись в лог

/* ============================================================================
 * НАСТРОЙКИ ПРЕДУПРЕЖДЕНИЙ
 * ============================================================================ */

// Время до пустых баков (в минутах)
#define ALERT_TIME_CRITICAL              15     // Критическое (<15 мин)
#define ALERT_TIME_WARNING               30     // Предупреждение (<30 мин)
#define ALERT_TIME_INFO                  60     // Информация (<60 мин)

// Напоминание о переключении баков (в минутах)
#define TANK_SWITCH_REMINDER_INTERVAL    20     // Каждые 20 минут

/* ============================================================================
 * БАЛАНСИРОВКА БАКОВ
 * ============================================================================ */

// Максимальная разница между баками (в кг)
#define TANK_IMBALANCE_WARNING_KG       500.0   // Предупреждение
#define TANK_IMBALANCE_CRITICAL_KG     1000.0   // Критическая разбалансировка

/* ============================================================================
 * ДАЛЬНОСТЬ И ЗАПАС ХОДА
 * ============================================================================ */

// Максимальная дальность
#define F28_MK4000_MAX_RANGE_NM         3650    // Морские мили
#define F28_MK4000_MAX_RANGE_KM         6760    // Километры

/* ============================================================================
 * ДОПОЛНИТЕЛЬНЫЕ КОНСТАНТЫ
 * ============================================================================ */

// Размер окна для расчёта среднего (количество измерений)
#define MOVING_AVERAGE_WINDOW_SIZE        10    // Последние 10 измерений

// Минимальное топливо для запуска двигателя (кг)
#define MIN_FUEL_FOR_ENGINE_START        100.0

// Точность измерения топлива (погрешность в процентах)
#define FUEL_MEASUREMENT_ACCURACY          2.0  // ±2%

#endif /* FOKKER_F28_CONSTANTS_H */